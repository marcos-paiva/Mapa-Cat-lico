<?php

class Videos extends Zend_Db_Table_Abstract
{
	//configurando nome da tabela
	//por padrao Zend_Db_Table busca pelo nome da classe separando maiusculas por _
	protected $_name = 'videos';
	
	//identificando chave primaria da tabela
	//por padrao Zend_Db_Table busca chave primaria pelo nome id
	protected $_primary = 'id';



	public function Listar($mes)
	{
		//pegar mes atual
		$data = new Zend_Db_Expr('MONTH(now())');
		
		$db = Zend_Registry::get("db");
		$s = $db->select();
		$s->from(array('v'=>'videos'),array('id', 'nome', 'duracao', 'pasta','titulo','ativo','data'));
		$s->from(array('m'=>'meses'),array('id','mes','sigla'));
		$s->where('v.ativo =?', 1);
		$s->where('m.id =?', $mes);
		$s->where('MONTH(data) = m.id');
		$s->order('data DESC');

		return $db->fetchAll($s);

// 		return $this->fetchAll("ativo = 1 AND MONTH(data)= $mes");

	}
}

?>